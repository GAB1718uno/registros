"use strict";(self.webpackChunkregistrosApp=self.webpackChunkregistrosApp||[]).push([[280],{6280:(k,g,l)=>{l.r(g),l.d(g,{AuthModule:()=>I});var h=l(6895),m=l(3060),i=l(4006),b=l(5226),d=l.n(b),e=l(4650),p=l(7266);let A=(()=>{class n{constructor(t,o,r){this.fb=t,this.router=o,this._authSerice=r,this.miFormulario=this.fb.group({email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required,i.kI.minLength(8)]]})}ngOnInit(){}login(){const{email:t,password:o}=this.miFormulario.value;console.log(t,o),this._authSerice.login(t,o).subscribe(r=>{console.log(r),!0===r?this.router.navigateByUrl("/fallecidos/listado"):(d().fire("Atenci\xf3n",r,"warning"),console.log(r))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.qu),e.Y36(m.F0),e.Y36(p.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:24,vars:2,consts:[["autocomplete","off",1,"login100-form",3,"formGroup","ngSubmit"],[1,"login100-form-title","p-b-49"],[1,"wrap-input100","m-b-23"],[1,"label-input100"],["type","email","formControlName","email","placeholder","Ingrese su email",1,"input100"],[1,"focus-input100"],[1,"wrap-input100"],["type","password","formControlName","password","placeholder","Ingrese su contrase\xf1a",1,"input100"],[1,"text-right","p-t-8","p-b-31"],[1,"container-login100-form-btn"],[1,"wrap-login100-form-btn"],[1,"login100-form-bgbtn"],["type","submit",1,"login100-form-btn",3,"disabled"],[1,"flex-col-c","p-t-60"],[1,"txt1","p-b-17"],["routerLink","/auth/registro",1,"txt2"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.login()}),e.TgZ(1,"span",1),e._uU(2," Login "),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"span",3),e._uU(5,"Email"),e.qZA(),e._UZ(6,"input",4),e._UZ(7,"span",5),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"span",3),e._uU(10,"Password"),e.qZA(),e._UZ(11,"input",7),e._UZ(12,"span",5),e.qZA(),e._UZ(13,"div",8),e.TgZ(14,"div",9),e.TgZ(15,"div",10),e._UZ(16,"div",11),e.TgZ(17,"button",12),e._uU(18," Login "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",13),e.TgZ(20,"span",14),e._uU(21," \xbfNo tienes cuenta? "),e.qZA(),e.TgZ(22,"a",15),e._uU(23," Crear una aqu\xed "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",o.miFormulario),e.xp6(17),e.Q6J("disabled",o.miFormulario.invalid))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,m.yS],encapsulation:2}),n})();var T=l(2105);let v=(()=>{class n{constructor(t,o,r){this.fb=t,this._authService=o,this.router=r,this.miFormulario=this.fb.group({usuario:["",[i.kI.required]],email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required]]})}ngOnInit(){}registrar(){const{usuario:t,password:o,email:r}=this.miFormulario.value;console.log(this.miFormulario.value),this._authService.registrar(t,o,r).subscribe(a=>{!0===a?this.router.navigateByUrl("/fallecidos/listado"):(console.log(a),d().fire("Atenci\xf3n",a[0].msg||a,"warning"))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.qu),e.Y36(p.e),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-registro"]],decls:29,vars:2,consts:[["autocomplete","off",1,"login100-form",3,"formGroup","ngSubmit"],[1,"login100-form-title","p-b-49"],[1,"wrap-input100","m-b-23"],[1,"label-input100"],["type","usuario","formControlName","usuario","placeholder","Ingrese su nombre",1,"input100"],[1,"focus-input100"],["type","email","formControlName","email","placeholder","Ingrese su email",1,"input100"],[1,"wrap-input100"],["type","password","formControlName","password","placeholder","Ingrese su contrase\xf1a",1,"input100"],[1,"text-right","p-t-8","p-b-31"],[1,"container-login100-form-btn"],[1,"wrap-login100-form-btn"],[1,"login100-form-bgbtn"],["type","submit",1,"login100-form-btn",3,"disabled"],[1,"flex-col-c","p-t-60"],[1,"txt1","p-b-17"],["routerLink","/auth",1,"txt2"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.registrar()}),e.TgZ(1,"span",1),e._uU(2," Nuevo Usuario "),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"span",3),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",4),e._UZ(7,"span",5),e.qZA(),e.TgZ(8,"div",2),e.TgZ(9,"span",3),e._uU(10,"Email"),e.qZA(),e._UZ(11,"input",6),e._UZ(12,"span",5),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"span",3),e._uU(15,"Password"),e.qZA(),e._UZ(16,"input",8),e._UZ(17,"span",5),e.qZA(),e._UZ(18,"div",9),e.TgZ(19,"div",10),e.TgZ(20,"div",11),e._UZ(21,"div",12),e.TgZ(22,"button",13),e._uU(23," Registro "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",14),e.TgZ(25,"span",15),e._uU(26," \xbfYa tienes una cuenta? "),e.qZA(),e.TgZ(27,"a",16),e._uU(28," Ingrese aqu\xed "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",o.miFormulario),e.xp6(22),e.Q6J("disabled",o.miFormulario.invalid))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,m.yS],encapsulation:2}),n})();var q=l(3900),u=l(5938),C=l(9549),_=l(4144),U=l(4859);let y=(()=>{class n{constructor(t,o,r,a){this.fb=t,this.dialogRef=o,this._dialog=r,this.data=a,this.description="Cambiar Contrase\xf1a"}close(){this.dialogRef.close()}save(){this.data.password1!=this.data.password2&&d().fire("Atenci\xf3n","La contrase\xf1a debe coincidir. Poseer letra minusc. y mayusc., numeros y un car\xe1cter especial","success")}onNoClick(){this.dialogRef.close()}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.qu),e.Y36(u.so),e.Y36(u.uw),e.Y36(u.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-dialog"]],decls:13,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","","type","password",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"]],template:function(t,o){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"mat-form-field"),e.TgZ(4,"input",2),e.NdJ("ngModelChange",function(a){return o.data.password1=a}),e.qZA(),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"mat-form-field"),e.TgZ(7,"input",2),e.NdJ("ngModelChange",function(a){return o.data.password2=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",3),e.TgZ(9,"button",4),e.NdJ("click",function(){return o.onNoClick()}),e._uU(10,"No Cambiar"),e.qZA(),e.TgZ(11,"button",5),e.NdJ("click",function(){return o.save()}),e._uU(12,"Guardar"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(o.description),e.xp6(3),e.Q6J("ngModel",o.data.password1),e.xp6(3),e.Q6J("ngModel",o.data.password2),e.xp6(4),e.Q6J("mat-dialog-close",o.data.password1))},directives:[u.uh,u.xY,C.KE,_.Nt,i.Fj,i.JJ,i.On,u.H8,U.lW,u.ZT],encapsulation:2}),n})(),N=(()=>{class n{constructor(t,o,r,a){this.fb=t,this._activatedRoute=o,this._authService=r,this._dialog=a,this.imagenMostrar="",this.usuario={},this.identidad="",this.formPerfil=this.fb.group({usuario:["",[i.kI.required]],email:["",[i.kI.required]],nombre:["jhgskdf",[i.kI.required]],apellidos:["",[i.kI.required]],nacio:["",[i.kI.required]],direccion:["",[i.kI.required]],identidad:["",[i.kI.required]],fotoPerfil:["",[i.kI.required]],password:[this.password1,[i.kI.required]]}),this.consentimiento=!0}ngOnInit(){console.log(this.formPerfil.value.password),this._activatedRoute.params.pipe((0,q.w)(({id:t})=>this._authService.obtenerUsuario(t))).subscribe(t=>{this.usuario=t,console.log(this.usuario),this.formPerfil.patchValue(this.usuario)})}guardar(){console.log("guardado")}cambiarContrasenya(){this._dialog.open(y,{width:"250px",data:{password1:this.password1,password2:this.password2}}).afterClosed().subscribe(o=>{console.log("The dialog was closed"),console.log(o),this.password1=o})}validarNif(t){var o,r;1==/^[XYZ]?\d{5,8}[A-Z]$/.test(t=t.target.value)?(o=(o=(o=(o=t.substr(0,t.length-1)).replace("X",0)).replace("Y",1)).replace("Z",2),r=t.substr(t.length-1,1),"TRWAGMYFPDXBNJZSQVHLCKET".substring(o%=23,o+1)!=r.toUpperCase()?alert("Dni o Nie erroneo, la letra del NIF no se corresponde"):alert("Dni o Nie correcto")):alert("Dni o Nie erroneo, formato no v\xe1lido")}imagenSeleccionada(t){const r=t.target.files[0].name;if(t.target.files){const a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=f=>{this.imagenMostrar=f.target.result}}console.log(r)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.qu),e.Y36(m.gz),e.Y36(p.e),e.Y36(u.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-perfil"]],decls:43,vars:5,consts:[[3,"formGroup","ngSubmit"],["fxLayout","column",1,"mb-3"],[3,"src"],[1,"mb-3"],["for","fotoPerfil",1,"form-label"],["type","file","formControlName","fotoPerfil","id","fotoPerfil",1,"form-control",3,"change"],["for","nombre",1,"form-label"],["type","text","id","nombre","name","nombre","formControlName","nombre",1,"form-control"],["id","textoAviso",1,"form-text"],["for","apellidos",1,"form-label"],["type","text","formControlName","apellidos","id","apellidos",1,"form-control"],["for","dni",1,"form-label"],["type","text","name","identidad","formControlName","identidad","id","identidad",1,"form-control",3,"change"],["for","nacio",1,"form-label"],["type","date","formControlName","nacio","id","nacio",1,"form-control"],["for","direccion",1,"form-label"],["type","text","formControlName","direccion","id","direccion",1,"form-control"],[1,"mb-3","form-check"],["type","checkbox","name","consentimiento","id","exampleCheck1",1,"form-check-input"],["for","exampleCheck1",1,"form-check-label"],["type","submit",1,"btn","btn-outline-danger","float",3,"click"],["type","submit",1,"btn","btn-primary","float-end",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.guardar()}),e.TgZ(1,"div",1),e._UZ(2,"img",2),e.TgZ(3,"div"),e.TgZ(4,"small"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div"),e.TgZ(7,"small"),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",3),e.TgZ(10,"label",4),e._uU(11,"Foto de Perfil"),e.qZA(),e.TgZ(12,"input",5),e.NdJ("change",function(a){return o.imagenSeleccionada(a)}),e.qZA(),e.qZA(),e.TgZ(13,"div",3),e.TgZ(14,"label",6),e._uU(15,"Nombre"),e.qZA(),e._UZ(16,"input",7),e.TgZ(17,"div",8),e._uU(18,"Solamente nombre sin apellidos."),e.qZA(),e.qZA(),e.TgZ(19,"div",3),e.TgZ(20,"label",9),e._uU(21,"Apellidos"),e.qZA(),e._UZ(22,"input",10),e.qZA(),e.TgZ(23,"div",3),e.TgZ(24,"label",11),e._uU(25,"Documento de Identidad"),e.qZA(),e.TgZ(26,"input",12),e.NdJ("change",function(a){return o.validarNif(a)}),e.qZA(),e.qZA(),e.TgZ(27,"div",3),e.TgZ(28,"label",13),e._uU(29,"Fecha de Nacimiento"),e.qZA(),e._UZ(30,"input",14),e.qZA(),e.TgZ(31,"div",3),e.TgZ(32,"label",15),e._uU(33,"Direcci\xf3n"),e.qZA(),e._UZ(34,"input",16),e.qZA(),e.TgZ(35,"div",17),e._UZ(36,"input",18),e.TgZ(37,"label",19),e._uU(38,"Doy mi consentimientod"),e.qZA(),e.qZA(),e.TgZ(39,"button",20),e.NdJ("click",function(){return o.cambiarContrasenya()}),e._uU(40,"Cambiar Contrase\xf1a?"),e.qZA(),e.TgZ(41,"button",21),e.NdJ("click",function(){return o.guardar()}),e._uU(42,"Enviar datos"),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",o.formPerfil),e.xp6(2),e.s9C("src",o.imagenMostrar,e.LSH),e.xp6(3),e.hij("Usuario: ",o.usuario.usuario,""),e.xp6(3),e.hij("Email: ",o.usuario.email,""),e.xp6(33),e.Q6J("disabled",!1===o.consentimiento))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:["img[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;min-width:50px;max-width:100%;max-height:150px;border-radius:30px}"]}),n})();var c=l(8390);const w=[{path:"",component:T.C,children:[{path:"login",component:A},{path:"registro",component:v},{path:"perfil/:id",component:N,canActivate:[c.z],canLoad:[c.z]},{path:"**",redirectTo:"login"}]}];let J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.Bz.forChild(w)],m.Bz]}),n})();var F=l(8711);let I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[i.u5,h.ez,J,i.UX,F.q]]}),n})()}}]);