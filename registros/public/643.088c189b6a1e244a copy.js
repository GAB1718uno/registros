"use strict";(self.webpackChunkregistrosApp=self.webpackChunkregistrosApp||[]).push([[643,775],{4643:(M,U,n)=>{n.r(U),n.d(U,{SepulturasModule:()=>q});var S=n(6895),g=n(3060),x=n(4998),t=n(4650),b=n(7579),m=n(8372),i=n(4006),a=n(1326),c=n(2564),p=n(7009),f=n(4859);function v(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"li",15),t.TgZ(1,"a",16),t.NdJ("click",function(){const h=t.CHM(e).$implicit;return t.oxw(2).sugeridos(h.calle)}),t._uU(2),t.qZA(),t.qZA()}if(2&r){const e=l.$implicit;t.xp6(2),t.hij(" ",e.calle," ")}}function d(r,l){if(1&r&&(t.TgZ(0,"ul",13),t.YNc(1,v,3,1,"li",14),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.callesSugeridas)}}function s(r,l){1&r&&(t.TgZ(0,"div"),t.TgZ(1,"div",17),t._uU(2," No se encontr\xf3 ning\xfan resultado para la b\xfasqueda "),t.qZA(),t.qZA())}function Z(r,l){if(1&r&&(t.TgZ(0,"div"),t._UZ(1,"img",18),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("src",e.objectUrl,t.LSH)}}let _=(()=>{class r{constructor(e,o,u,h,A){this.route=e,this.fb=o,this._sepulturaService=u,this._compartidoService=h,this._snackBar=A,this.avatar="",this.nombreFile="",this.items=[{}],this.objectUrl="",this.noImage=!0,this.hayerror=!1,this.termino="",this.onDebounce=new t.vpe,this.debouncer=new b.x,this.sugerenciasVisibles=!1,this.callesSugeridas=[],this.formUbicacion=this.fb.group({id:[""],calle:[""],numero:[""],avatar:[""],tipo:["sepulturas"]})}ngOnInit(){this.debouncer.pipe((0,m.b)(500)).subscribe(e=>{this.onDebounce.emit(e),console.log("debouncer:",e)})}teclaPresionada(e){this.sugerenciasVisibles=!0,this.debouncer.next(this.termino),this._sepulturaService.obtenerSepulturasCribadas(this.termino).subscribe(o=>this.callesSugeridas=o.splice(0,8),o=>this.callesSugeridas=[])}sugeridos(e){console.log(e),this.termino=e,this.sugerenciasVisibles=!1}imagenSeleccionada(e){if(e.target.files){var o=new FileReader;o.readAsDataURL(e.target.files[0]),o.onload=u=>{this.objectUrl=u.target.result}}this.imagenSubir=e.target.files[0],this.noImage=!1}uploadFile(){const{calle:o,numero:u,tipo:h}=this.formUbicacion.value;this._compartidoService.uploadSepulturaCloudinary(o,u,h,this.imagenSubir).subscribe(A=>{this.mostrarSnack("Sepultura creada con exito"),setTimeout(()=>{this.route.navigateByUrl("/sepulturas/mostrarsep")},3e3)})}uploadSoloFile(){this._compartidoService.uploadSoloFile(this.imagenSubir).subscribe(e=>console.log(e))}mostrarSnack(e){this._snackBar.open(e,"Espere... guardando...",{duration:5e3})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(g.F0),t.Y36(i.qu),t.Y36(a.M),t.Y36(c.D),t.Y36(p.ux))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-agregar-sep"]],decls:26,vars:5,consts:[[1,"mb-3","row"],["autocomplete","off",3,"formGroup"],["for","calle"],["type","text","name","termino","placeholder","Escriba el nombre de la calle","formControlName","calle",1,"form-control",3,"ngModel","input","ngModelChange"],["calle",""],["class","list-group",4,"ngIf"],[4,"ngIf"],["for","numero"],["type","text","placeholder","Digite el numero","formControlName","numero",1,"form-control"],["numero",""],["for","imagen"],["id","uploadImage","name","images","type","file",3,"change"],["mat-stroked-button","","color","warn",1,"mas",2,"margin","5px",3,"click"],[1,"list-group"],["class","list-group-item list-group-item-action",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action"],[3,"click"],[1,"alert","alert-danger"],["alt","...",1,"card-img-top",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1),t._UZ(2,"br"),t.TgZ(3,"label",2),t._uU(4,"Calle: "),t.qZA(),t.TgZ(5,"input",3,4),t.NdJ("input",function(h){return o.teclaPresionada(h)})("ngModelChange",function(h){return o.termino=h}),t.qZA(),t._UZ(7,"br"),t.YNc(8,d,2,1,"ul",5),t.YNc(9,s,3,0,"div",6),t.TgZ(10,"label",7),t._uU(11,"Numero: "),t.qZA(),t._UZ(12,"input",8,9),t._UZ(14,"br"),t.TgZ(15,"label",10),t._uU(16,"Fotografia: "),t.qZA(),t.TgZ(17,"input",11),t.NdJ("change",function(h){return o.imagenSeleccionada(h)}),t.qZA(),t._UZ(18,"br"),t._UZ(19,"hr"),t.TgZ(20,"button",12),t.NdJ("click",function(){return o.uploadFile()}),t._uU(21,"Crear Sepultura"),t.qZA(),t.qZA(),t._UZ(22,"br"),t._UZ(23,"br"),t._UZ(24,"br"),t.YNc(25,Z,2,1,"div",6),t.qZA()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.formUbicacion),t.xp6(4),t.Q6J("ngModel",o.termino),t.xp6(3),t.Q6J("ngIf",o.sugerenciasVisibles),t.xp6(1),t.Q6J("ngIf",o.hayerror),t.xp6(16),t.Q6J("ngIf",!o.noImage))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,S.O5,S.sg,f.lW],styles:["li[_ngcontent-%COMP%]{cursor:pointer}"]}),r})();var C=n(1576),y=n(2340),T=n(3546);const O=function(r){return["/sepulturas/editarsep/",r]};let D=(()=>{class r{constructor(e,o){this._sepulturaSerice=e,this.route=o,this.seps={},this.sepulturas=[],this.baseUrl=y.N.baseUrl,this.imagenUrlSep=`${this.baseUrl}/uploads/sepulturas/`}ngOnInit(){this._sepulturaSerice.obtenerSepulturas().subscribe(e=>{console.log(e),this.sepulturas=e})}editar(e){this.route.navigateByUrl(`/sepulturas/editarsep/${e}`)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(a.M),t.Y36(g.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-sepulturas-tarjeta"]],inputs:{seps:"seps"},decls:15,vars:6,consts:[["fxLayout","row wrap",1,"container"],[1,"hijo1"],[1,"img"],[3,"src"],[1,"hijo2"],[1,"hijo3"],["mat-raised-button","","color","primary",1,"edit",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"mat-card-header"),t.TgZ(6,"mat-card-title"),t._uU(7),t.qZA(),t.TgZ(8,"mat-card-subtitle"),t._uU(9),t.qZA(),t.qZA(),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"div",5),t.TgZ(12,"mat-card-actions"),t.TgZ(13,"button",6),t._uU(14," Editar "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.s9C("src",o.seps.avatar,t.LSH),t.xp6(4),t.Oqu(o.seps.calle),t.xp6(2),t.Oqu(o.seps.numero),t.xp6(4),t.Q6J("routerLink",t.VKq(4,O,o.seps.id)))},directives:[T.a8,C.xw,T.dk,T.n5,T.$j,T.hq,f.lW,g.rH],styles:["mat-card[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;padding:0}mat-card-content[_ngcontent-%COMP%]{padding-top:5px;color:#0c0c0c;align-items:center;align-self:center;text-align:center;max-width:100%}mat-card-header[_ngcontent-%COMP%]{background-color:#68a7ad;color:#fff;height:100%;width:100%;text-align:center;vertical-align:middle}.container[_ngcontent-%COMP%]{background-color:#99c4c8;width:100%}mat-card-title[_ngcontent-%COMP%]{margin:0;padding-top:10px;line-height:16px;text-align:center;vertical-align:middle;max-width:100%}mat-card-subtitle[_ngcontent-%COMP%]{padding-top:2px;line-height:15px;text-align:center;vertical-align:middle;max-width:100%}mat-card-actions[_ngcontent-%COMP%]{padding-top:2px;line-height:15px;text-align:center;vertical-align:middle;max-width:100%}small[_ngcontent-%COMP%]{align-content:center;max-width:100%}div[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{background:#464141;margin-top:10px}.img[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}img[_ngcontent-%COMP%]{min-width:50px;max-width:100%;max-height:360px;border-radius:30px}.hijo1[_ngcontent-%COMP%], .hijo2[_ngcontent-%COMP%]{order:0;flex:1 1 auto;align-self:center}.hijo3[_ngcontent-%COMP%]{text-align:center;order:0;flex:1 1 auto;align-self:center}.mas[_ngcontent-%COMP%]{border-bottom:#f1ecec;border-color:#0c0c0c;color:#0c0c0c}button[_ngcontent-%COMP%]{max-width:90%}.container[_ngcontent-%COMP%]{width:100%;margin-left:4px;padding:1px}"]}),r})();function E(r,l){if(1&r&&(t.TgZ(0,"div",2),t._UZ(1,"app-sepulturas-tarjeta",3),t.qZA()),2&r){const e=l.$implicit;t.xp6(1),t.Q6J("seps",e)}}let $=(()=>{class r{constructor(e,o){this._sepulturaSerice=e,this.route=o,this.item=[],e.obtenerSepulturas().subscribe(u=>{this.item=u})}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(a.M),t.Y36(g.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-mostrar-sep"]],decls:2,vars:1,consts:[["fxLayout","row wrap","fxFlexAlignContent","space-between","fxLayoutAlign","space-between start","fxLayoutGap","1.5px",2,"margin-top","5px","margin-left","5px"],["fxFlex.xl","20","fxFlex.lg","22","fxFlex.md","33","fxFlex.sm","45","fxFlex.xs","48",4,"ngFor","ngForOf"],["fxFlex.xl","20","fxFlex.lg","22","fxFlex.md","33","fxFlex.sm","45","fxFlex.xs","48"],[3,"seps"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,E,2,1,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.item))},directives:[C.xw,C.Wh,C.SQ,S.sg,C.yH,D],styles:[""]}),r})();var P=n(3900);function B(r,l){if(1&r&&(t.TgZ(0,"div"),t._UZ(1,"img",16),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.s9C("src",e.sepultura.avatar,t.LSH)}}function J(r,l){if(1&r&&(t.TgZ(0,"div"),t._UZ(1,"img",16),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("src",e.objectUrl,t.LSH)}}let L=(()=>{class r{constructor(e,o,u,h,A,Q){this._activatedRoute=e,this._snackBar=o,this._sepulturaService=u,this._compartidoService=h,this.fb=A,this.route=Q,this.sepultura={id:"",calle:"",numero:"",avatar:"",tipo:""},this.imagenBD=!0,this.baseUrl=y.N.baseUrl,this.capturado1="",this.objectUrl="",this.imagenUrlSep=`${this.baseUrl}/uploads/sepulturas/`,this.imagenUrl=`${this.baseUrl}/uploads/${this.sepultura.tipo}/${this.sepultura.avatar}`,this.formUbicacion=this.fb.group({id:[""],calle:[""],numero:[""],avatar:[""],tipo:[""],createdAt:[""],updatedAt:[""]}),this._activatedRoute.params.pipe((0,P.w)(({id:F})=>this._sepulturaService.obtenerSepultura(F))).subscribe(F=>{this.sepultura=F,this.formUbicacion.setValue(this.sepultura)})}imagenSeleccionada(e){if(e.target.files){var o=new FileReader;o.readAsDataURL(e.target.files[0]),o.onload=u=>{this.objectUrl=u.target.result}}this.imagenSubir=e.target.files[0],this.imagenBD=!1}actualizar(){const{calle:e,numero:o,tipo:u}=this.formUbicacion.value;this._compartidoService.updateSep(this.sepultura.id,e,o,u,this.imagenSubir).subscribe(h=>{this.mostrarSnack("Sepultura actualizada con exito"),setTimeout(()=>{this.route.navigateByUrl("/sepulturas/mostrarsep")},3e3)})}eliminar(){this._sepulturaService.eliminarSepultura(this.sepultura.id).subscribe(e=>{this.mostrarSnack("Sepultura eliminada con exito"),setTimeout(()=>{this.route.navigateByUrl("/sepulturas/mostrarsep")},3e3)})}crearNueva(){const{calle:e,numero:o,tipo:u}=this.formUbicacion.value;this._compartidoService.uploadFile(e,o,u,this.imagenSubir).subscribe(h=>{this.mostrarSnack("Sepultura creada con exito"),setTimeout(()=>{this.route.navigateByUrl("/sepulturas/mostrarsep")},3e3)})}mostrarSnack(e){this._snackBar.open(e,"Espere... guardando...",{duration:5e3})}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(g.gz),t.Y36(p.ux),t.Y36(a.M),t.Y36(c.D),t.Y36(i.qu),t.Y36(g.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-editar-sep"]],inputs:{sepultura:"sepultura",imagenSubir:"imagenSubir",imagenBD:"imagenBD"},decls:41,vars:3,consts:[[1,"mb-3","row"],["autocomplete","off",3,"formGroup"],["for","tipo"],["formControlName","tipo"],["tipo",""],["selected",""],["for","calle"],["type","text","placeholder","Teclee la calle","formControlName","calle",1,"form-control"],["calle",""],["for","numero"],["type","text","placeholder","Digite el numero","formControlName","numero",1,"form-control"],["numero",""],["for","imagen"],["id","uploadImage","name","images","type","file",3,"change"],["mat-stroked-button","","color","warn",1,"mas",2,"margin","5px",3,"click"],[4,"ngIf"],["alt","...",1,"card-img-top",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1),t.TgZ(2,"label",2),t._uU(3,"Tipo"),t.qZA(),t.TgZ(4,"select",3,4),t.TgZ(6,"option"),t._uU(7,"Fallecidos"),t.qZA(),t.TgZ(8,"option",5),t._uU(9,"Sepulturas"),t.qZA(),t.TgZ(10,"option"),t._uU(11,"Usuarios"),t.qZA(),t.qZA(),t._UZ(12,"br"),t._UZ(13,"hr"),t.TgZ(14,"label",6),t._uU(15,"Calle: "),t.qZA(),t._UZ(16,"input",7,8),t._UZ(18,"br"),t.TgZ(19,"label",9),t._uU(20,"Numero: "),t.qZA(),t._UZ(21,"input",10,11),t._UZ(23,"br"),t.TgZ(24,"label",12),t._uU(25,"Fotografia: "),t.qZA(),t.TgZ(26,"input",13),t.NdJ("change",function(h){return o.imagenSeleccionada(h)}),t.qZA(),t._UZ(27,"br"),t._UZ(28,"hr"),t.TgZ(29,"button",14),t.NdJ("click",function(){return o.actualizar()}),t._uU(30,"Actualizar"),t.qZA(),t._uU(31," | "),t.TgZ(32,"button",14),t.NdJ("click",function(){return o.eliminar()}),t._uU(33,"Eliminar"),t.qZA(),t._uU(34," | "),t.TgZ(35,"button",14),t.NdJ("click",function(){return o.crearNueva()}),t._uU(36,"Crear Nueva"),t.qZA(),t.qZA(),t._UZ(37,"br"),t._UZ(38,"br"),t.YNc(39,B,2,1,"div",15),t.YNc(40,J,2,1,"div",15),t.qZA()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.formUbicacion),t.xp6(38),t.Q6J("ngIf",o.imagenBD),t.xp6(1),t.Q6J("ngIf",!o.imagenBD))},directives:[i._Y,i.JL,i.sg,i.EJ,i.JJ,i.u,i.YN,i.Kr,i.Fj,f.lW,S.O5],styles:[""]}),r})();var j=n(4402);const I=[{path:"",component:x.O,children:[{path:"mostrarsep",component:$},{path:"agregarsep",component:_},{path:"editarsep/:id",component:L},{path:"sepultura",component:(()=>{class r{constructor(e,o,u){this._fallecidosService=e,this._activatedRoute=o,this._sepulturaService=u,this.items={}}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(j.t),t.Y36(g.gz),t.Y36(a.M))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-sepultura"]],decls:2,vars:0,consts:[["src",""]],template:function(e,o){1&e&&(t._UZ(0,"hr"),t._UZ(1,"img",0))},styles:["img[_ngcontent-%COMP%]{width:100%;border-radius:10px}"]}),r})()}]}];let Y=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[g.Bz.forChild(I)],g.Bz]}),r})();var k=n(2317),R=n(7775),w=n(9814),z=n(2289);let q=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[S.ez,Y,i.UX,k.q,R.SharedModule,i.u5,w.o9,z.xu]]}),r})()},1326:(M,U,n)=>{n.d(U,{M:()=>t});var S=n(2340),g=n(4650),x=n(529);let t=(()=>{class b{constructor(i){this.http=i,this.baseUrl=S.N.baseUrl}obtenerSepultura(i){return this.http.get(`${this.baseUrl}/sepulturas/${i}`)}obtenerSepulturasCribadas(i){return this.http.get(`${this.baseUrl}/sepulturas/busqueda/${i}`)}obtenerSepulturas(){return this.http.get(`${this.baseUrl}/sepulturas`)}eliminarSepultura(i){return this.http.delete(`${this.baseUrl}/sepulturas/${i}`)}editarSepultura(i){return this.http.get(`${this.baseUrl}/sepulturas/${i}`)}}return b.\u0275fac=function(i){return new(i||b)(g.LFG(x.eN))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},2564:(M,U,n)=>{n.d(U,{D:()=>b});var S=n(2340),g=n(4004),x=n(4650),t=n(529);let b=(()=>{class m{constructor(a){this.http=a,this.baseUrl=S.N.baseUrl,this.objectUrl=""}get files(){return{...this._files}}preview(a){if(a.target.files){var c=new FileReader;c.readAsDataURL(a.target.files[0]),c.onload=p=>{this.objectUrl=p.target.result}}return this.objectUrl}updateSep(a,c,p,f,v){const d=`${this.baseUrl}/uploads/sepulturas/${a}`,s=new FormData;return s.append("id",a),s.append("file",v),s.append("calle",c),s.append("numero",p),s.append("tipo",f),this.http.put(d,s,{headers:{"x-token":localStorage.getItem("token")||""}})}uploadSoloFile(a){const c=`${this.baseUrl}/uploads/sepulturas`,p=new FormData;return p.append("file",a),this.http.post(c,p,{headers:{"x-token":localStorage.getItem("token")||""}})}uploadSepulturaCloudinary(a,c,p,f){const v=`${this.baseUrl}/uploads/${p}`,d=new FormData;return d.append("calle",a),d.append("numero",c),d.append("tipo",p),d.append("file",f),this.http.post(v,d,{headers:{"x-token":localStorage.getItem("token")||""}})}uploadFile(a,c,p,f){const v=`${this.baseUrl}/sepulturas`,d=new FormData;return d.append("calle",a),d.append("numero",c),d.append("tipo",p),d.append("file",f),this.http.post(v,d,{headers:{"x-token":localStorage.getItem("token")||""}})}obtenerImagen(a,c){return this.http.get(`${this.baseUrl}/uploads/${a}/${c}`).pipe((0,g.U)(p=>{console.log(p)}))}updatFile(a){return console.log(a),this.http.put(`${this.baseUrl}/sepulturas/${a}`,a)}crearLikes(a,c,p,f){return this.http.post(`${this.baseUrl}/likes/`,{usuarioId:a,fallecidoId:c,valor:p,like:f})}borrarLikes(a,c){const p=`${this.baseUrl}/likes/${c}/${a}`;return console.log(c),this.http.delete(p)}obtenerLikes(){return console.log(),this.http.get(`${this.baseUrl}/likes/`)}obtenerLikesIndividuales(a){return console.log(),this.http.get(`${this.baseUrl}/likes/${a}`)}}return m.\u0275fac=function(a){return new(a||m)(x.LFG(t.eN))},m.\u0275prov=x.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},7775:(M,U,n)=>{n.r(U),n.d(U,{SharedModule:()=>d});var S=n(6895),g=n(2317),x=n(9814),t=n(3060),b=n(4998),m=n(4650);const i=[{path:"",component:b.O,children:[]}];let a=(()=>{class s{}return s.\u0275fac=function(_){return new(_||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[t.Bz.forChild(i)],t.Bz]}),s})();var c=n(9638);const p=[];let f=(()=>{class s{}return s.\u0275fac=function(_){return new(_||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[t.Bz.forChild(p)],t.Bz]}),s})(),v=(()=>{class s{}return s.\u0275fac=function(_){return new(_||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[S.ez,g.q,x.o9,f]]}),s})(),d=(()=>{class s{}return s.\u0275fac=function(_){return new(_||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[S.ez,v,g.q,x.o9,t.Bz,a,c.ComentariosModule]]}),s})()}}]);